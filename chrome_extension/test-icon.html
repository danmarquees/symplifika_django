<!doctype html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Teste - √çcone de Expans√£o Symplifika</title>
        <style>
            body {
                font-family: "Poppins", sans-serif;
                background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
                margin: 0;
                padding: 40px 20px;
                min-height: 100vh;
            }

            .container {
                max-width: 800px;
                margin: 0 auto;
                background: white;
                padding: 40px;
                border-radius: 16px;
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            }

            h1 {
                color: #00c853;
                text-align: center;
                margin-bottom: 30px;
                font-weight: 600;
            }

            .field-group {
                margin-bottom: 25px;
            }

            label {
                display: block;
                margin-bottom: 8px;
                font-weight: 500;
                color: #333;
            }

            input,
            textarea {
                width: 100%;
                padding: 12px 16px;
                border: 2px solid #e1e5e9;
                border-radius: 8px;
                font-size: 14px;
                transition: border-color 0.3s ease;
                box-sizing: border-box;
            }

            input:focus,
            textarea:focus {
                outline: none;
                border-color: #00c853;
                box-shadow: 0 0 0 3px rgba(0, 200, 83, 0.1);
            }

            textarea {
                resize: vertical;
                min-height: 120px;
            }

            .form-row {
                display: flex;
                gap: 20px;
            }

            .form-row .field-group {
                flex: 1;
            }

            .instructions {
                background: #f8f9fa;
                padding: 20px;
                border-radius: 8px;
                margin-bottom: 30px;
                border-left: 4px solid #00c853;
            }

            .debug-panel {
                background: #263238;
                color: #00ff57;
                padding: 20px;
                border-radius: 8px;
                margin-top: 30px;
                font-family: "Courier New", monospace;
                font-size: 12px;
            }

            .debug-button {
                background: #00c853;
                color: white;
                border: none;
                padding: 8px 16px;
                border-radius: 6px;
                cursor: pointer;
                margin: 5px;
                font-size: 12px;
            }

            .debug-button:hover {
                background: #00a142;
            }

            .status-indicator {
                display: inline-block;
                width: 12px;
                height: 12px;
                border-radius: 50%;
                margin-right: 8px;
            }

            .status-active {
                background: #00c853;
            }
            .status-inactive {
                background: #f44336;
            }
            .status-warning {
                background: #ff9800;
            }

            @media (max-width: 768px) {
                .container {
                    padding: 20px;
                }
                .form-row {
                    flex-direction: column;
                }
            }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>üöÄ Teste do √çcone de Expans√£o Symplifika</h1>

            <div class="instructions">
                <h3>üéØ Como testar:</h3>
                <ol>
                    <li><strong>Clique</strong> nos campos de texto abaixo</li>
                    <li><strong>Digite</strong> algumas palavras</li>
                    <li><strong>Mova o mouse</strong> sobre os campos</li>
                    <li>
                        O <strong>√≠cone verde</strong> deve aparecer pr√≥ximo ao
                        campo
                    </li>
                    <li>
                        <strong>Clique no √≠cone</strong> para ver os atalhos
                        dispon√≠veis
                    </li>
                    <li>
                        <strong>Clique nos cards</strong> para copiar o atalho
                    </li>
                    <li>
                        <strong>Ctrl+Clique nos cards</strong> para inserir no
                        campo
                    </li>
                    <li>
                        Use as <strong>fun√ß√µes de debug</strong> abaixo para
                        testar
                    </li>
                </ol>

                <div
                    style="
                        background: #e3f2fd;
                        padding: 15px;
                        border-radius: 8px;
                        margin-top: 15px;
                        border-left: 4px solid #2196f3;
                    "
                >
                    <h4 style="margin: 0 0 10px 0; color: #1976d2">
                        üí° Nova Funcionalidade - Copiar Atalhos
                    </h4>
                    <ul style="margin: 0; padding-left: 20px; color: #424242">
                        <li>
                            <strong>Clique simples</strong> nos cards: Copia o
                            atalho para a √°rea de transfer√™ncia
                        </li>
                        <li>
                            <strong>Ctrl+Clique</strong> (ou Cmd+Clique no Mac):
                            Insere o atalho diretamente no campo
                        </li>
                        <li>
                            Notifica√ß√£o visual confirma quando o atalho foi
                            copiado
                        </li>
                        <li>Feedback visual nos cards durante a a√ß√£o</li>
                    </ul>
                </div>
            </div>

            <form>
                <div class="form-row">
                    <div class="field-group">
                        <label for="name">Nome Completo</label>
                        <input
                            type="text"
                            id="name"
                            name="name"
                            placeholder="Digite seu nome completo..."
                        />
                    </div>

                    <div class="field-group">
                        <label for="email">E-mail</label>
                        <input
                            type="email"
                            id="email"
                            name="email"
                            placeholder="seu@email.com"
                        />
                    </div>
                </div>

                <div class="form-row">
                    <div class="field-group">
                        <label for="phone">Telefone</label>
                        <input
                            type="tel"
                            id="phone"
                            name="phone"
                            placeholder="(11) 99999-9999"
                        />
                    </div>

                    <div class="field-group">
                        <label for="website">Website</label>
                        <input
                            type="url"
                            id="website"
                            name="website"
                            placeholder="https://seusite.com"
                        />
                    </div>
                </div>

                <div class="field-group">
                    <label for="search">Pesquisar</label>
                    <input
                        type="search"
                        id="search"
                        name="search"
                        placeholder="Pesquise por qualquer coisa..."
                    />
                </div>

                <div class="field-group">
                    <label for="message">Mensagem</label>
                    <textarea
                        id="message"
                        name="message"
                        placeholder="Digite sua mensagem aqui... Este √© um campo de texto maior onde voc√™ pode escrever mais conte√∫do e testar como o √≠cone aparece em textareas."
                    ></textarea>
                </div>

                <div class="field-group">
                    <label for="description">Descri√ß√£o Longa</label>
                    <textarea
                        id="description"
                        name="description"
                        rows="6"
                        placeholder="Este √© um campo ainda maior para testar diferentes tamanhos de textarea. Digite bastante texto aqui para ver como o √≠cone se comporta..."
                    ></textarea>
                </div>

                <div class="form-row">
                    <div class="field-group">
                        <label for="company">Empresa</label>
                        <input
                            type="text"
                            id="company"
                            name="company"
                            placeholder="Nome da sua empresa"
                        />
                    </div>

                    <div class="field-group">
                        <label for="position">Cargo</label>
                        <input
                            type="text"
                            id="position"
                            name="position"
                            placeholder="Seu cargo na empresa"
                        />
                    </div>
                </div>
            </form>

            <div class="debug-panel">
                <h3>üõ†Ô∏è Painel de Debug</h3>
                <p>
                    Use estas fun√ß√µes no console do navegador ou clique nos
                    bot√µes:
                </p>

                <div>
                    <button
                        class="debug-button"
                        onclick="testShowTextFieldIcons()"
                    >
                        Mostrar √çcones
                    </button>
                    <button
                        class="debug-button"
                        onclick="testListActiveIcons()"
                    >
                        Listar √çcones Ativos
                    </button>
                    <button class="debug-button" onclick="testToggleIcons()">
                        Alternar √çcones
                    </button>
                    <button class="debug-button" onclick="testHideAll()">
                        Esconder Todos
                    </button>
                    <button class="debug-button" onclick="testStatus()">
                        Status do Sistema
                    </button>
                    <button
                        class="debug-button"
                        onclick="testCopyNotification()"
                    >
                        Testar Notifica√ß√£o
                    </button>
                </div>

                <div
                    id="debug-output"
                    style="
                        margin-top: 15px;
                        color: #00ff57;
                        min-height: 100px;
                        background: rgba(0, 0, 0, 0.2);
                        padding: 10px;
                        border-radius: 4px;
                    "
                >
                    <div>Console de debug - aguardando comandos...</div>
                </div>

                <div style="margin-top: 15px; font-size: 11px; color: #90a4ae">
                    <strong>Fun√ß√µes dispon√≠veis no console:</strong><br />
                    ‚Ä¢ window.symplifikaDebug.showTextFieldIcons()<br />
                    ‚Ä¢ window.symplifikaDebug.listActiveIcons()<br />
                    ‚Ä¢ window.symplifikaDebug.toggleAllIcons()<br />
                    ‚Ä¢ window.symplifikaDebug.forceShowAll()<br />
                    ‚Ä¢ window.symplifikaDebug.hideAll(immediate)<br />
                    ‚Ä¢ window.symplifikaDebug.testCopyNotification(title,
                    content)
                </div>
            </div>
        </div>

        <!-- CSS da extens√£o para teste local -->
        <link rel="stylesheet" href="content.css" />

        <!-- Scripts da extens√£o para teste local -->
        <script src="quick-access-icon.js"></script>
        <script src="init-test.js"></script>

        <script>
            // Fun√ß√µes de teste para os bot√µes - suportam tanto extens√£o real quanto simulada
            function testShowTextFieldIcons() {
                if (window.symplifikaDebug) {
                    const count = window.symplifikaDebug.showTextFieldIcons();
                    updateDebugOutput(
                        `‚úÖ √çcones exibidos em ${count} campos de texto (extens√£o real)`,
                    );
                } else if (window.symplifikaTest) {
                    window.symplifikaTest.showAllIcons();
                    updateDebugOutput(
                        `‚úÖ √çcones exibidos em campos de texto (modo teste)`,
                    );
                } else {
                    updateDebugOutput("‚ùå Symplifika n√£o est√° carregado");
                }
            }

            function testListActiveIcons() {
                if (window.symplifikaDebug) {
                    const count = window.symplifikaDebug.getActiveIconsCount();
                    window.symplifikaDebug.listActiveIcons();
                    updateDebugOutput(
                        `üìã ${count} √≠cones ativos (extens√£o real - veja o console)`,
                    );
                } else if (window.symplifikaTest) {
                    const status = window.symplifikaTest.getStatus();
                    console.log("Status do teste:", status);
                    updateDebugOutput(
                        `üìã ${status.activeIcons} √≠cones ativos (modo teste)`,
                    );
                } else {
                    updateDebugOutput("‚ùå Symplifika n√£o est√° carregado");
                }
            }

            function testToggleIcons() {
                if (window.symplifikaDebug) {
                    window.symplifikaDebug.toggleAllIcons();
                    updateDebugOutput(
                        "üîÑ √çcones alternados (extens√£o real - veja o console)",
                    );
                } else if (window.symplifikaTest) {
                    // Alternar entre mostrar e esconder √≠cones
                    const icons = document.querySelectorAll(".symplifika-icon");
                    icons.forEach((icon) => {
                        icon.style.display =
                            icon.style.display === "none" ? "flex" : "none";
                    });
                    updateDebugOutput(
                        `üîÑ Alternados ${icons.length} √≠cones (modo teste)`,
                    );
                } else {
                    updateDebugOutput("‚ùå Symplifika n√£o est√° carregado");
                }
            }

            function testHideAll() {
                if (window.symplifikaDebug) {
                    window.symplifikaDebug.hideAll(true);
                    updateDebugOutput(
                        "üëª Todos os √≠cones foram escondidos (extens√£o real)",
                    );
                } else if (
                    window.symplifikaTest &&
                    window.testQuickAccessIcon
                ) {
                    window.testQuickAccessIcon.hideAll(true);
                    updateDebugOutput(
                        "üëª Todos os √≠cones foram escondidos (modo teste)",
                    );
                } else {
                    updateDebugOutput("‚ùå Symplifika n√£o est√° carregado");
                }
            }

            function testStatus() {
                if (window.symplifikaDebug) {
                    const isEnabled = window.symplifikaDebug.isEnabled();
                    const isAuthenticated =
                        window.symplifikaDebug.isAuthenticated();
                    const iconCount =
                        window.symplifikaDebug.getActiveIconsCount();

                    updateDebugOutput(`
                    üìä Status do Sistema (Extens√£o Real):<br>
                    ‚Ä¢ Ativado: ${isEnabled ? "‚úÖ" : "‚ùå"}<br>
                    ‚Ä¢ Autenticado: ${isAuthenticated ? "‚úÖ" : "‚ùå"}<br>
                    ‚Ä¢ √çcones ativos: ${iconCount}
                `);
                } else if (window.symplifikaTest) {
                    const status = window.symplifikaTest.getStatus();
                    updateDebugOutput(`
                    üìä Status do Sistema (Modo Teste):<br>
                    ‚Ä¢ QuickAccessIcon: ${status.quickAccessIcon ? "‚úÖ" : "‚ùå"}<br>
                    ‚Ä¢ ContentScript: ${status.contentScript ? "‚úÖ" : "‚ùå"}<br>
                    ‚Ä¢ √çcones ativos: ${status.activeIcons}<br>
                    ‚Ä¢ Atalhos: ${status.shortcuts}
                `);
                } else {
                    updateDebugOutput(
                        "‚ùå Symplifika n√£o est√° carregado - verifique se a extens√£o est√° ativa ou se o modo teste foi carregado",
                    );
                }
            }

            function testCopyNotification() {
                if (window.symplifikaDebug) {
                    window.symplifikaDebug.testCopyNotification(
                        "Atalho de Teste",
                        "Este √© um exemplo de conte√∫do copiado para a √°rea de transfer√™ncia!",
                    );
                    updateDebugOutput(
                        "üîî Notifica√ß√£o de c√≥pia testada (extens√£o real)",
                    );
                } else if (window.symplifikaTest) {
                    window.symplifikaTest.testNotification();
                    updateDebugOutput(
                        "üîî Notifica√ß√£o de c√≥pia testada (modo teste)",
                    );
                } else {
                    updateDebugOutput("‚ùå Symplifika n√£o est√° carregado");
                }
            }

            function updateDebugOutput(message) {
                const output = document.getElementById("debug-output");
                const timestamp = new Date().toLocaleTimeString();
                output.innerHTML =
                    `<div>[${timestamp}] ${message}</div>` + output.innerHTML;
            }

            // Verificar se o Symplifika est√° carregado
            function checkSymplifikaStatus() {
                const statusIndicator = document.createElement("div");
                statusIndicator.style.position = "fixed";
                statusIndicator.style.top = "20px";
                statusIndicator.style.right = "20px";
                statusIndicator.style.padding = "12px 16px";
                statusIndicator.style.borderRadius = "8px";
                statusIndicator.style.fontWeight = "500";
                statusIndicator.style.fontSize = "14px";
                statusIndicator.style.zIndex = "1000000";

                if (window.symplifikaDebug) {
                    statusIndicator.innerHTML =
                        '<span class="status-indicator status-active"></span>Symplifika Carregado';
                    statusIndicator.style.background = "#d4edda";
                    statusIndicator.style.color = "#155724";
                    statusIndicator.style.border = "1px solid #c3e6cb";
                } else {
                    statusIndicator.innerHTML =
                        '<span class="status-indicator status-inactive"></span>Symplifika N√£o Detectado';
                    statusIndicator.style.background = "#f8d7da";
                    statusIndicator.style.color = "#721c24";
                    statusIndicator.style.border = "1px solid #f5c6cb";
                }

                document.body.appendChild(statusIndicator);

                // Remover ap√≥s 5 segundos
                setTimeout(() => {
                    statusIndicator.remove();
                }, 5000);
            }

            // Adicionar listeners para os campos
            document.addEventListener("DOMContentLoaded", function () {
                const fields = document.querySelectorAll("input, textarea");
                fields.forEach((field) => {
                    field.addEventListener("focus", function () {
                        console.log(
                            `Campo em foco: ${field.tagName} (${field.type || "N/A"})`,
                        );
                    });

                    field.addEventListener("input", function () {
                        if (field.value.length > 0) {
                            console.log(
                                `Digitando em: ${field.tagName}, valor: "${field.value.substring(0, 30)}${field.value.length > 30 ? "..." : ""}"`,
                            );
                        }
                    });
                });

                // Verificar status ap√≥s carregamento
                setTimeout(checkSymplifikaStatus, 2000);

                updateDebugOutput(
                    "üåü P√°gina de teste carregada! Clique nos campos para testar o √≠cone. Nova funcionalidade: Clique nos cards copia, Ctrl+Click insere!",
                );

                // Aguardar carregamento da extens√£o (real ou simulada)
                let checkAttempts = 0;
                const maxAttempts = 10;

                const checkExtensionLoaded = () => {
                    checkAttempts++;

                    if (window.symplifikaDebug) {
                        updateDebugOutput(
                            "‚úÖ Extens√£o Symplifika REAL detectada e carregada!",
                        );
                        updateDebugOutput(
                            "üí° Use as fun√ß√µes window.symplifikaDebug.* para teste",
                        );
                    } else if (window.symplifikaTest) {
                        updateDebugOutput(
                            "‚úÖ Modo TESTE Symplifika carregado!",
                        );
                        updateDebugOutput(
                            "üí° Use as fun√ß√µes window.symplifikaTest.* para teste",
                        );

                        // Mostrar √≠cones automaticamente no modo teste
                        setTimeout(() => {
                            window.symplifikaTest.showAllIcons();
                            updateDebugOutput(
                                "üéØ √çcones de teste exibidos automaticamente",
                            );
                        }, 1000);
                    } else if (checkAttempts < maxAttempts) {
                        updateDebugOutput(
                            `üîÑ Aguardando Symplifika... (${checkAttempts}/${maxAttempts})`,
                        );
                        setTimeout(checkExtensionLoaded, 1000);
                    } else {
                        updateDebugOutput(
                            "‚ö†Ô∏è Symplifika n√£o detectado - usando p√°gina em modo standalone",
                        );
                        updateDebugOutput(
                            "üí° Carregue como extens√£o do Chrome ou use o modo teste local",
                        );
                    }
                };

                setTimeout(checkExtensionLoaded, 500);
            });
        </script>
    </body>
</html>
